_config:
  _metadata:
    description: console-web
    name: console-web-web
    namespace: default
    template:
      type: template.caicloud.io/application
      version: 1.0.0
    version: "v3.3.1-skd"
  controllers:
  - containers:
    - env:
      - name: GRAFANA_PORT
        value: '6104'
      - name: KIBANA_PORT
        value: '6105'
      - name: MONGODB_URL
        value: '[[ platform_mongo_host ]]'
      - name: HIDE_MENU
        value: caas_circle
      - name: HIDE
        value: forget
      - name: CLOUD_ENV
        value: private
      - name: OEM_ENV
        value: '0'
      - name: HODOR_SERVER
        value: http://hodor:8080
      - name: EXTERNAL_HODOR
        from:
          type: Config
          name: platform-config
          key: "hodorEndpoint"
      - name: MONITOR_SERVER
        value: http://monitoring-admin:8899/api/v1
      - name: CAICLOUD_PRODUCT_CFG_STRING_MULTI_TENANCY
        from:
          type: Config
          name: platform-config
          key: "tenantMode"
      - name: ISSUER
        from:
          type: Config
          name: platform-config
          key: "oidcIssuer"
      - name: ISSUER_PORT
        value: "6062"
      - name: OIDC_CLIENT_ID
        value: compass-web
      - name: OIDC_CLIENT_SECRET
        value: compass-web
      - name: CONSOLE_BASE_PATH
        from:
          type: Config
          name: platform-config
          key: "consoleBasePath"
      - name: COMPASS_SERVER
        from:
          type: Config
          name: platform-config
          key: "compassWebEndpoint"
      - name: CLEVER_SERVER
        from:
          type: Config
          name: platform-config
          key: "cleverServer"
      - name: 'USERWEB_SERVER'
        from:
          type: Config
          name: platform-config
          key: "userwebServer"
      - name: SHOW_LANG
        value: 'false'
      - name: DEFAULT_LANG
        value: 'zh-CN'
      - name: NODE_TLS_REJECT_UNAUTHORIZED
        value: '0'
      # Get release info from system-info ConfigMap
      - name: PRODUCT_VERSION
        value: '[[ platform_release_version ]]'
      - name: PRODUCT_RELEASE_TIME
        value: '[[ platform_release_time ]]'
      image: '[[ registry_release ]]/console-web:v3.3.1-skd'
      imagePullPolicy: IfNotPresent
      ports:
      - port: 3000
        protocol: TCP
    controller:
      replica: 1
      strategy:
        surge: 1
        unavailable: 0
    services:
    - name: console-web
      ports:
      - protocol: TCP
        port: 3000
      type: ClusterIP
    type: Deployment
