_config:
  _metadata:
    description: cyclone-workflow-controller
    name: cyclone-workflow-controller
    namespace: default
    template:
      type: template.caicloud.io/application
      version: 1.0.0
    version: '0.9.1'
  controllers:
  - containers:
    - command:
      - /workspace/controller
      image: '[[ registry_release ]]/cyclone-workflow-controller:0.9.1'
      imagePullPolicy: Always
    controller:
      replica: 1
    pod:
      serviceAccountName: admin
    type: Deployment
    configs:
    - name: workflow-controller-config
      data:
      - key: workflow-controller.json
        value: |
          {
            "images": {
              "git-resolver": "[[ registry_release ]]/cyclone-resolver-git:0.9.1",
              "image-resolver": "[[ registry_release ]]/cyclone-resolver-image:0.9.1",
              "kv-resolver": "[[ registry_release ]]/cyclone-resolver-kv:0.9.1",
              "coordinator": "[[ registry_release ]]/cyclone-workflow-coordinator:0.9.1",
              "gc": "[[ registry_library ]]/alpine:3.7"
            },
            "logging": {
              "level": "debug"
            },
            "gc": {
              "enabled": true,
              "delay_seconds": 604800,
              "retry": 1
            },
            "limits": {
              "max_workflowruns": 50
            },
            "pvc": "native-cyclone-server-server-v1-0-cyclone-data",
            "cyclone_server_addr": "native-cyclone-server.default.svc.cluster.local"
          }
