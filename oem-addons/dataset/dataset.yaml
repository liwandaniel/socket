_config:
  _metadata:
    description: dataset
    name: dataset
    namespace: default
    template:
      type: template.caicloud.io/application
      version: 1.0.0
    version: 'v0.0.1-rc.3'
  controllers:
  - type: Deployment
    controller:
      replica: 1
    containers:
    - name: dataset
      image: '[[ registry_release ]]/clever-dataset:v0.0.1-rc.3'
      imagePullPolicy: Always
      resources:
        requests:
          cpu: "1"
      mounts:
      - name: dataset
        path: "/datasets"
      - name: model
        path: "/models"
      - name: time
        path: "/etc/localtime"
    - name: gitserver
      image: '[[ registry_release ]]/git-server:2.8.3-rc0'
      imagePullPolicy: Always
      resources:
        requests:
          cpu: 500m
      mounts:
      - name: dataset
        path: "/datasets"
      - name: model
        path: "/models"
      - name: time
        path: "/etc/localtime"
    volumes:
    - name: dataset
      type: Static
      source:
        target: clever-dataset
    - name: model
      type: Static
      source:
        target: clever-model
    - name: time
      type: HostPath
      source:
        path: "/etc/localtime"
    services:
    - name: dataset
      type: NodePort
      ports:
      - protocol: HTTP
        targetPort: 8080                
        port: 8080
        nodePort: 30032
    - name: gitserver
      type: NodePort
      ports:
      - protocol: HTTP
        targetPort: 22 
        port: 22
        nodePort: 30696
