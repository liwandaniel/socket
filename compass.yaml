---
metadata:
  name: full compass
  version: 2.7.3
  description: full compass deployment config
spec:
  systemAddons:
  - name: tenant-admin
    description: Manage tenants
  - name: cluster-admin
    description: Manage clusters
  - name: hodor-server
    description: API Gateway
  - name: license-server
    description: Product license
  - name: dex-cauth
    description: Auth server
  - name: auth-provider
    description: caicloud auth provider
  - name: infra-mongo
    description: MongoDB Cluster
  - name: infra-mongo-bak
    description: Backup MongoDB Cluster
  - name: hybrid-controller-manager
    description: hybrid controller manager
  modules:
  - name: modularize-web
    description: modularize of compass-web
    required: true
    addons:
    - name: app-web
      description: app-web
    - name: resource-web
      description: resource-web
    - name: insight-web
      description: insight-web
    - name: m-user-web
      description: m-user-web
    - name: devops-web
      description: devops-web
    - name: modularize-web-gateway
      description: modularize-web-gateway
    - name: modularize-web
      description: modularize-web
    - name: web-redis
      description: Redis for console web
    - name: web-gateway-proxy
      description: Web gateway proxy
    - name: tutorial
      description: Tutorial Gitbook
  - name: user-web
    description: User web
    required: true
    addons:
    - name: user-web
      description: User web
  - name: devops
    description: DevOps
    required: true
    addons:
    - name: devops-admin
      description: devops management
      deps:
      - storage-admin
      - cargo-admin
    - name: cyclone-server
      description: Core of CI/CD
    - name: cyclone-workflow-controller
      description: Core of CI/CD
  - name: cargo
    description: Docker registry
    required: true
    addons:
    - name: cargo-admin
      description: cargo management
    - name: cargo-auth-controller
      description: cargo auth controller
  - name: cluster
    description: cluster
    required: true
    addons:
    - name: cluster-controller
      description: cluster controller
    - name: cluster-machine
      description: cluster machine controller
    - name: cluster-scaling
      description: cluster auto scaling group controller
    - name: cluster-reqgap
      description: cluster requirement gap controller
  - name: tenant
    description: tenant
    required: true
    addons:
    - name: tenant-controller
      description: tenant controller
  - name: plugin-center
    description: plugin center
    required: true
    addons:
    - name: plugin-center-admin
      description: Plugin management
  - name: statistician
    description: statistician
    required: true
    addons:
    - name: statistician-admin
      description: statistician
  - name: alerting
    description: alerting
    required: true
    addons:
    - name: alerting-manager
      description: Handle alert from promethus
    - name: alerting-notifier
      description: Send alert
  - name: notify
    description: notify
    required: true
    addons:
    - name: notify-admin
      description: Notify management
    - name: notify-postgres
      description: DB for notify
  - name: app
    description: app
    required: true
    addons:
    - name: app-admin
      description: App management
    - name: helm-registry
      description: Registry for app
    - name: template-registry
      description: Registry for common template
    - name: application-admission
      description: Admission for application orchestration
    - name: application-controller
      description: Controller for application orchestration
  - name: microservice
    description: microservice
    required: true
    addons:
    - name: microservice-admin
      description: Microservice management
    - name: microservice-controller
      description: Controller for microservice task
  - name: compass-admin
    description: common template registry
    required: true
    addons:
    - name: compass-admin
      description: common template registry
  - name: loadbalancer
    description: load balancer
    required: true
    addons:
    - name: loadbalancer-admin
      description: Load balance management
    - name: loadbalancer-controller
      description: Controller for load balancer
  - name: config
    description: config center
    required: true
    addons:
    - name: config-admin
      description: Config management
    - name: config-gc
      description: GC of config
    - name: config-sync
      description: Sync controller for config
    - name: config-admission
      description: Admission controller for config
    - name: config-reference
      description: Controller for config reference
  - name: storage
    description: storage
    required: true
    addons:
    - name: storage-admin
      description: Storage management
    - name: storage-admin-controller
      description: Storage operations
    - name: storage-admission
      description: Admission controller for storage
    - name: storage-controller
      description: Controller for storage
    - name: storage-provisioner-nfs
      description: Provision nfs volume
    - name: s3-gateway
      description: simple-static-file-server
    - name: cephfs-provisioner
      description: cephfs-provisioner
    - name: localstorage-controller
      description: Controller for local storage
    - name: localstorage-scheduler
      description: Scheduler for local storage
  - name: monitoring
    description: monitoring
    required: true
    addons:
    - name: monitoring-admin
      description: Monitoring management
    - name: monitoring-operator
      description: Customized monitoring metrics
    - name: monitoring-grafana
      description: Display monitoring
    - name: monitoring-kube-state-metrics
      description: Collect k8s metrics
    - name: monitoring-metrics-server
      description: Metrics server
    - name: monitoring-prometheus
      description: Prometheus
    - name: exporters-app
      description: app exporter
    - name: exporters-elasticsearch
      description: elasticsearch exporter
    - name: exporters-gpu
      description: gpu exporter
    - name: exporters-node
      description: node exporter
    - name: monitoring-addon
      description: cps/k8s addon checker
  - name: logging
    description: logging
    required: true
    addons:
    - name: logging-admin
      description: Logging management
    - name: logging-processor
      description: Logging processor
    - name: logging-eventer
      description: Collect k8s events
    - name: logging-hooks
      description: Logging hooks
    - name: logging-ruler
      description: Logging ruler
    - name: logging-filebeat
      description: Logging filebeat
  - name: infra-patch
    description: infra patch for fixing runc
    required: true
    addons:
    - name: infra-patch
      description: infra patch for fixing runc
